<div bsModal #createModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-success  modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Document Preview</h4> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <h4 class="modal-title">Document Type: <span style="color: red;">{{doc_keyword | uppercase}}</span> </h4>
        <button type="button" class="close" (click)="createModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <div class="row">
              <div class="col-md-6">
                <embed  [src]="doc_url_reference | safe" type="application/pdf" width="100%" height="600px" navpanes = "1" toolbar= "0"/>
              </div>
              <div class="col-md-6">
                <app-dynamic-form>
                </app-dynamic-form>
            </div>
            

          </div>
      </div>
      
      <div class="modal-footer">
        <!-- <button   class="btn btn-warning col-md-4" (click)="resetForm()">Reset</button>
        <button  type="submit" [disabled]="!createRecordForm.valid" (click)="createRecord()" class="btn btn-success col-md-4">Save</button> -->
      
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>
<div class="animated fadeIn">
  <div class="card">
    <div class="card-header">
      <strong>Data Cleaning Check List</strong>
    </div>
    <div class="card-body">
      <tabset #staticTabs>
        <tab heading="Search By File Number">


          <form [formGroup]="searchForm">
            <div class="row">

              <div class="form-group col-sm-6">
                <label for="country">File Number</label>
                <input type="text" class="form-control" formControlName="search_value" placeholder="Enter File Number">
              </div>
              <div class="form-group col-sm-3">
                <label for="country">&nbsp;&nbsp;</label>
                <button type="button" class="btn form-control  btn-success btn-md " (click)="filterdocuments()"> <i
                    class="fa fa-search"></i> Search </button>
              </div>

            </div>
          </form>
          <!-- <br> -->
          <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4 offset-md-8">
              <div class="input-group">
                <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span>
                </div>
                <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="searchString">
              </div>
            </div>
          </div>
          <br>
          <div class="table-responsive">

            <table [mfData]="records" #mf="mfDataTable" [mfRowsOnPage]="10"
              class="table table-bordered table-striped row-border hover" style="width:100%">
              <thead>
                <tr>
                  <th>#</th>
                  <th>File Number</th>
                  <th>Document Type</th>
                  <th> Status</th>
                  <th> Uploaded By</th>
                  <th>File Name</th>
                  <th>Validated By</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody *ngIf="records?.length != 0">
                <tr *ngFor="let recordinstance of mf.data | filter : searchString ; let i = index"
                  [ngSwitch]="recordinstance.document_status">
                  <td>{{i + 1}}</td>
                  <td>{{ recordinstance.file_no }}</td>
                  <td>{{ recordinstance.document_keyword | uppercase }}</td>
                  <td>
                    <div *ngSwitchCase="'APPROVED'">
                      <span class="badge badge-success">
                        APPROVED
                      </span>
                    </div>
                    <div *ngSwitchCase="'REJECTED'">
                      <span class="badge badge-danger">
                        REJECTED
                      </span>
                    </div>
                    <div *ngSwitchDefault>
                      <span class="badge badge-primary">
                        {{recordinstance.document_status}}
                      </span>
                    </div>

                  </td>
                  <td>{{ recordinstance.uploader }}</td>
                  <td>{{ recordinstance.original_file_name }}</td>
                  <td>{{ recordinstance.approver }}</td>


                  <td>
                    <button type="button" class="btn btn-success  btn-sm " (click)="viewdetails(recordinstance.id)"> <i
                        class="fa fa-pencil-square-o"></i> </button>

                  </td>

                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="12">
                    Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,100,1000,10000]">
                    </mfBootstrapPaginator>
                  </td>
                </tr>
              </tfoot>
              <tbody *ngIf="records?.length == 0">
                <tr>
                  <td colspan="9" class="no-data-available">No records to show</td>
                </tr>
              <tbody>
            </table>
          </div>


        </tab>

        <tab heading="Document Captured Preview">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-4 col-md-4 col-lg-4 offset-md-8">
                <div class="input-group">
                  <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div>
                  <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="documentrecordsString">
                </div>
              </div>
              </div>
            <div class="table-responsive">
              <table 
              [mfData]="document_details" #documentrecordstable="mfDataTable"
              [mfRowsOnPage]="10"
                class="table table-bordered table-striped row-border hover" style="width:100%">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>File Number</th>
                    <th>Folio Number</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody *ngIf="document_details?.length != 0">
                  <tr *ngFor="let recordinstance of  documentrecordstable.data | filter : documentrecordsString ; let i = index">
                    <td>{{i + 1}}</td>
                    <td>{{ recordinstance.file_number}}</td>
                    <td>{{ recordinstance.folio_number }}</td>
                    
                   
                   <td>
                      <button type="button" class="btn btn-primary  btn-sm " (click)="preview_document(recordinstance.id)"> <i
                          class="fa fa-pencil"></i> </button>
                      
                    </td> 
        
                  </tr>
                </tbody>
                <tbody *ngIf="document_details?.length == 0">
                  <tr>
                    <td colspan="9" class="no-data-available">No records to show</td>
                  </tr>
                <tbody>
              </table>
            </div>
            <hr>
      <div class="comments_section">
        <div class="row">
          <div class="col-sm-4 col-md-4 col-lg-4 offset-md-8">
            <div class="input-group">
              <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div>
              <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="commentsearchString">
            </div>
          </div>
          </div>
          <br>
          <div class="table-responsive">
            <table [mfData]="comments" #commentstable="mfDataTable"
            [mfRowsOnPage]="10"
            class="table table-striped table-bordered table-hover row-border" style="width:100%">
              <thead>
                <tr>
             
                  <th style="width: 10%">
                    #
                  </th>
                  <th style="width: 20%">
                    <mfDefaultSorter by="type_category.name">Comments </mfDefaultSorter>
                  </th>
                  <th style="width: 20%">
                    <mfDefaultSorter by="type_category.name">Commented By </mfDefaultSorter>
                  </th>
                  <th style="width: 20%">
                    <mfDefaultSorter by="type_category.name">Commented Date </mfDefaultSorter>
                  </th>
               
                  
                </tr>
              </thead>
              <tbody *ngIf="comments?.length != 0">
                <tr *ngFor="let recordinstance of commentstable.data | filter : commentsearchString ; let i = index">
                  <td>{{i + 1}}</td>
                  <td>{{ recordinstance.comments}}</td>
                  <td>{{ recordinstance.user }}</td>
                  <td>{{ recordinstance.action_time | date : 'medium'}}</td>
                  
    
      
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="12">
                    Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,100,1000]"></mfBootstrapPaginator>
                  </td>
                </tr>
              </tfoot>
              <tbody *ngIf="comments?.length == 0">
                <tr>
                  <td colspan="9" class="no-data-available">No Comments to show</td>
                </tr>
              <tbody>
            </table>
            </div>

      </div>
           
          </div>
        </tab>
        <tab heading="Document Types Data Capture">
          <form [formGroup]="DocumentTypeForm">
            <div class="row">
              <div class="col-sm-4 col-md-4 col-lg-4">
                <label>Document Type</label>

                <!-- formControlName="identification_type" -->
                <!-- [ngClass]="{ 'is-invalid': recordsearchformstatus &amp;&amp; RecordSearchForm.controls.identification_type.errors }" -->

                <select class="form-control" formControlName="document_type"
                [ngClass]="{ 'is-invalid': documenttypeformstatus &amp;&amp; DocumentTypeForm.controls.document_type.errors }" >
                  <option value="">--Select Document Type--</option>
                  <option *ngFor="let doc_types of department_documents" value={{doc_types.id}}>
                    {{doc_types.name}}
                  </option>
                </select>

                <error-message [control]="DocumentTypeForm.controls.document_type" *ngIf="documenttypeformstatus"></error-message>
              </div>
              <div class="col-sm-4 col-md-4 col-lg-4">
                <label>Is Validated</label>
                <select class="form-control" formControlName="validity_status"
                [ngClass]="{ 'is-invalid': documenttypeformstatus &amp;&amp; DocumentTypeForm.controls.validity_status.errors }">

                  <option *ngFor="let status_validate of validation_status" value={{status_validate.id}}>
                    {{status_validate.name}}
                  </option>
                </select>
                <error-message [control]="DocumentTypeForm.controls.validity_status" *ngIf="documenttypeformstatus"></error-message>
              </div>
              <div class="col-sm-4 col-md-4 col-lg-4">
                <label>&nbsp;</label>
                <button type="button" class="btn btn-primary col-md-12" (click)="addRow()">
                  <i class="fa fa-plus fa-1x"></i>
                  Add Record</button>
              </div>
            </div>
           
          </form>


          <div class="row">
            <div class="container" style="margin-top: 5%">
              <div class="row">
                <div class="col-sm-4 col-md-4 col-lg-4 offset-md-8">
                  <div class="input-group">
                    <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                    <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="docsearchString">
                  </div>
                </div>
              </div>
              <br>
              <div class="table-responsive">
                <table [mfData]="formInputRecords" #document_types_table="mfDataTable" [mfRowsOnPage]="10"
                  class="table table-striped table-bordered table-hover row-border">
                  <thead>
                    <tr>


                      <th>Document Type</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="formInputRecords?.length != 0">

                    <tr *ngFor="let dynamic of document_types_table.data | filter : docsearchString ; let i = index;">


                      <td>

                        <select class="form-control">

                          <option *ngFor="let doc_types of department_documents" value={{doc_types.id}}
                            value={{dynamic.document_type}}>
                            {{doc_types.name}}
                          </option>
                        </select>
                        <!-- {{dynamic.file_number}} -->

                      </td>
                      <td>
                        <!-- {{dynamic.validity_status}} -->
                        <select class="form-control">

                          <option *ngFor="let status_validate of validation_status" value={{status_validate.id}}
                            value={{dynamic.validity_status}}>
                            {{status_validate.name}}
                          </option>
                        </select>

                      </td>
                      <td>
                        <button type="button" class="btn btn-primary  btn-sm " (click)="editRow(dynamic)"> <i
                            class="fa fa-pencil "></i> </button>
                        <button type="button" class="btn btn-danger  btn-sm " (click)="deleteRow(dynamic)"> <i
                            class="fa fa-trash "></i> </button>
                      </td>

                    </tr>

                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="12">
                        Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]">
                        </mfBootstrapPaginator>
                      </td>
                    </tr>
                  </tfoot>
                  <tbody *ngIf="formInputRecords?.length == 0">
                    <tr>
                      <td colspan="9" class="no-data-available">No records to show</td>
                    </tr>
                  <tbody>
                </table>
              </div>

            </div>
          </div>



        </tab>



        <tab heading="Parcel Information">
          <form [formGroup]="parcelForm">
          <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4">
              
              <label>Parcel Numbering Type</label>

              <!-- formControlName="identification_type" -->
              <!-- [ngClass]="{ 'is-invalid': recordsearchformstatus &amp;&amp; RecordSearchForm.controls.identification_type.errors }" -->

              <select class="form-control" formControlName="parcel_numbering_type" [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_numbering_type.errors }">
                <option value="">--Select Parcel Numbering Type--</option>
                <option *ngFor="let parcel_type of parcel_numbering_type" value={{parcel_type.id}}>
                  {{parcel_type.name}}
                </option>
                
              </select>
              <error-message [control]="parcelForm.controls.parcel_numbering_type" *ngIf="parcelformstatus"></error-message>

            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Parcel Prefix</label>
              <input class="form-control" formControlName="parcel_prefix"
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_prefix.errors }" />
              <error-message [control]="parcelForm.controls.parcel_prefix" *ngIf="parcelformstatus"></error-message>

            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Parcel Number</label>
              <input class="form-control" formControlName="parcel_number" 
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_number.errors }" />
              <error-message [control]="parcelForm.controls.parcel_number" *ngIf="parcelformstatus"></error-message>
            </div>
          </div>

          <br />
          <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Parcel Owner Type</label>
              <select class="form-control" formControlName="parcel_owner_type"
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_owner_type.errors }">

                <option *ngFor="let ownertype of ownership_type" value={{ownertype.id}}>
                  {{ownertype.name}}
                </option>
              </select>
              <error-message [control]="parcelForm.controls.parcel_owner_type" *ngIf="parcelformstatus"></error-message>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Owner Identification Number </label>
              <input class="form-control" formControlName="parcel_owner_identification_number"
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_owner_identification_number.errors }" />
              <error-message [control]="parcelForm.controls.parcel_owner_identification_number" *ngIf="parcelformstatus"></error-message>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Parcel Owner </label>
              <input class="form-control"  formControlName="parcel_owner" 
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_owner.errors }"/>
              <error-message [control]="parcelForm.controls.parcel_owner" *ngIf="parcelformstatus"></error-message>
            </div>


          </div>
          <br />
          <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>File Number</label>
              <input class="form-control" readonly  formControlName="file_number" 
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.file_number.errors }"/>
              <error-message [control]="parcelForm.controls.file_number" *ngIf="parcelformstatus"></error-message>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>Status</label>
              <select class="form-control" formControlName="parcel_status"
              [ngClass]="{ 'is-invalid': parcelformstatus &amp;&amp; parcelForm.controls.parcel_status.errors }">

                <option *ngFor="let status_validate of validation_status" value={{status_validate.id}}>
                  {{status_validate.name}}
                </option>
              </select>
              <error-message [control]="parcelForm.controls.parcel_status" *ngIf="parcelformstatus"></error-message>

            </div>
            
            <div class="col-sm-4 col-md-4 col-lg-4">
              <label>&nbsp;</label>
              <button type="button" class="btn btn-primary col-md-12" (click)="addparcelRow()">
                <i class="fa fa-plus fa-1x"></i>
                Add Record</button>
            </div>

          </div>
          </form>
          <div class="row">
            <div class="container" style="margin-top: 5%">
              <div class="row">
                <div class="col-sm-4 col-md-4 col-lg-4 offset-md-8">
                  <div class="input-group">
                    <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span>
                    </div>
                    <input class="form-control " placeholder="Search Here" type="text" [(ngModel)]="parcelrecordsString">
                  </div>
                </div>
              </div>
              <br>
              <div class="table-responsive">
                <table [mfData]="parcelInputRecords" #parceltable="mfDataTable" [mfRowsOnPage]="10"
                  class="table table-striped table-bordered table-hover row-border">
                  <thead>
                    <tr>


                      <th>Parcel Number</th>
                      <th>Owner Identification Number</th>
                      <th>Parcel Owner</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="parcelInputRecords?.length != 0">

                    <tr *ngFor="let dynamic of parceltable.data | filter : docsearchString ; let i = index;">


                      <td>
                        {{dynamic.parcel_number}}

                      </td>
                      <td>
                        {{dynamic.parcel_owner_identification_number}}

                      </td>
                      <td>
                        {{dynamic.parcel_owner}}

                      </td>
                      <td>
                        <button type="button" class="btn btn-primary  btn-sm " (click)="editparcelRow(dynamic)"> <i
                            class="fa fa-pencil "></i> </button>
                        <button type="button" class="btn btn-danger  btn-sm " (click)="deleteparcelRow(dynamic)"> <i
                            class="fa fa-trash "></i> </button>
                      </td>

                    </tr>

                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="12">
                        Select Records in a page : <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]">
                        </mfBootstrapPaginator>
                      </td>
                    </tr>
                  </tfoot>
                  <tbody *ngIf="parcelInputRecords?.length == 0">
                    <tr>
                      <td colspan="9" class="no-data-available">No records to show</td>
                    </tr>
                  <tbody>
                </table>
              </div>

            </div>
          </div>






        </tab>
        <tab heading="Document Submission">
          Disclaimer : 
          <p>
            Kindly ensure that the data input is correct and accurate
          </p>

          <br>
          <div class="row">
            <div class="col-sm-4 col-md-4 col-lg-4">
              <button type="button" class="btn btn-danger col-md-12" (click)="saveformData()">
                <i class="fa fa-close fa-1x"></i>
                Reject</button>
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4 offset-md-4">
              <button type="button" class="btn btn-success col-md-12" (click)="approveparcel()">
                <i class="fa fa-check fa-1x"></i>
                Approve</button>
            </div>
            
          </div>
         
        </tab>
      </tabset>
    </div>